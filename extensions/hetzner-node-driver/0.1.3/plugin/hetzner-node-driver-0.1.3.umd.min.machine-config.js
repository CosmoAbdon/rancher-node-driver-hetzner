(("undefined"!==typeof self?self:this)["webpackChunkhetzner_node_driver_0_1_3"]=("undefined"!==typeof self?self:this)["webpackChunkhetzner_node_driver_0_1_3"]||[]).push([[921],{1177:function(e,a,r){var l={"./classic/metadata.json":9621,"./csp/metadata.json":6471,"./federal/metadata.json":1862,"./harvester/metadata.json":1507,"./rgs/metadata.json":8401,"./suse/metadata.json":7259};function t(e){var a=n(e);return r(a)}function n(e){if(!r.o(l,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return l[e]}t.keys=function(){return Object.keys(l)},t.resolve=n,e.exports=t,t.id=1177},5802:function(e,a,r){"use strict";r.r(a);var l=r(6758),t=r.n(l),n=r(935),i=r.n(n),s=i()(t());s.push([e.id,".hetzner-config .row.vcenter[data-v-495f986c]{align-items:center}.hetzner-config .description[data-v-495f986c]{font-size:.9rem;color:var(--input-label)}.hetzner-config .has-error[data-v-495f986c] .labeled-select{border-color:var(--error)}.hetzner-config .field-error[data-v-495f986c]{display:block;color:var(--error);font-size:.85rem;margin-top:4px}",""]),a["default"]=s},8698:function(e,a,r){var l=r(5802);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var t=r(4825).A;t("a4a8a458",l,!0,{sourceMap:!1,shadowMode:!1})},9782:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return ee}});var l=r(9274),t=r(7619),n=r(5524),i=r(3999),s=r(6710),o=r(5576),d=r(8745);function c(e,a,r){return(a=u(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function u(e){var a=v(e,"string");return"symbol"==typeof a?a:a+""}function v(e,a){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,a||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}class p{constructor(e){c(this,"credentialId",void 0),c(this,"BASE_URL","/meta/proxy/api.hetzner.cloud/v1"),this.credentialId=e}async getLocations(){const e=await this.request("/locations");return e.locations.map(e=>({value:e.name,label:`${e.name} (${e.description})`}))}async getServerTypes(e){const a=await this.request("/server_types?per_page=50");let r=a.server_types.filter(e=>!e.deprecated);return e&&(r=r.filter(a=>a.prices.some(a=>a.location===e))),r.map(a=>{let r="";if(e){const l=a.prices.find(a=>a.location===e);l&&(r=`â‚¬${Number(l.price_monthly.gross).toFixed(2)}/mo, `)}return{value:a.name,label:`${a.name} (${r}${a.architecture}, ${a.cores} vCPU, ${a.memory} GB RAM, ${a.disk} GB SSD)`}})}async getImages(){const e=await this.request("/images?per_page=50");return e.images.map(e=>({value:e.id,label:`${e.name} (${e.architecture}) - ${e.description}`}))}async getPlacementGroups(){const e=await this.request("/placement_groups?per_page=50");return e.placement_groups.map(e=>({value:e.id,label:e.name}))}async getNetworks(){const e=await this.request("/networks?per_page=50");return e.networks.map(e=>({value:e.id,label:`${e.name} (${e.ip_range})`}))}async getFirewalls(){const e=await this.request("/firewalls?per_page=50");return e.firewalls.map(e=>({value:e.id,label:e.name}))}async getSshKeys(){const e=await this.request("/ssh_keys?per_page=50");return e.ssh_keys.map(e=>({value:e.id,label:e.name}))}async request(e,a="GET",r){const l=`${this.BASE_URL}${e}`,t={"X-Api-CattleAuth-Header":`Bearer credID=${this.credentialId} passwordField=apiToken`};r&&(t["Content-Type"]="application/json");const n=await fetch(l,{method:a,headers:t,body:r?JSON.stringify(r):void 0});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()}}function m(e){return null!=e?String(e):void 0}function b(e){if(null!=e)return"string"===typeof e?Number(e):e}function h(e){return Array.isArray(e)?e.map(e=>"string"===typeof e?Number(e):e):[]}function f(e,a){const r=(0,l.reactive)({disablePublicNetwork:!1,disablePublicIpv4:!1,disablePublicIpv6:!1,usePrivateNetwork:!1,sshKeyId:void 0,firewallIds:[],networkIds:[],placementGroupId:void 0,serverImage:void 0,serverType:void 0,serverLocation:void 0,additionalUserData:void 0,serverLabels:{}}),t=(0,l.ref)(!1),n=(0,l.ref)(!1),i=(0,l.ref)(!1),s=(0,l.ref)([]);function o(){const e=[];r.serverLocation||e.push({field:"serverLocation",message:"Location is required"}),r.serverType||e.push({field:"serverType",message:"Server type is required"}),r.serverImage||e.push({field:"serverImage",message:"Image is required"});const a=r.disablePublicNetwork||r.disablePublicIpv4||r.disablePublicIpv6;return a&&!r.usePrivateNetwork&&e.push({field:"network",message:"Private network must be enabled when disabling public network access"}),r.usePrivateNetwork&&!r.networkIds?.length&&e.push({field:"networkIds",message:"At least one network must be selected when using private network"}),e}function d(e){return s.value.find(a=>a.field===e)?.message}function c(e){return s.value.some(a=>a.field===e)}async function u(){if(!i.value)return;t.value=!0;const a=e.value;a.serverType=m(r.serverType),a.serverLocation=m(r.serverLocation),a.imageId=m(r.serverImage),a.placementGroup=m(r.placementGroupId),a.networks=r.networkIds?.map(e=>e?.toString())||[],a.firewalls=r.firewallIds?.map(e=>e?.toString())||[],a.existingKeyId=m(r.sshKeyId),a.usePrivateNetwork=r.usePrivateNetwork,r.disablePublicNetwork?(a.disablePublic=!0,a.disablePublicIpv4=!1,a.disablePublicIpv6=!1):(a.disablePublic=!1,a.disablePublicIpv4=r.disablePublicIpv4,a.disablePublicIpv6=r.disablePublicIpv6),a.additionalUserData=r.additionalUserData,a.userDataFromFile=!0,a.serverLabel=r.serverLabels?Object.entries(r.serverLabels).map(([e,a])=>`${e}=${a}`):[],await(0,l.nextTick)(),t.value=!1}function v(e){n.value=!0,r.serverType=m(e.serverType),r.serverLocation=m(e.serverLocation),r.serverImage=b(e.imageId),r.placementGroupId=b(e.placementGroup),r.networkIds=h(e.networks),r.firewallIds=h(e.firewalls),r.sshKeyId=b(e.existingKeyId),r.usePrivateNetwork=e.usePrivateNetwork,r.disablePublicNetwork=e.disablePublic,r.disablePublicIpv4=e.disablePublicIpv4,r.disablePublicIpv6=e.disablePublicIpv6,r.additionalUserData=e.additionalUserData||"",r.serverLabels=Object.fromEntries((e.serverLabel||[]).map(e=>e.split("="))),n.value=!1}return(0,l.watch)(e,async e=>{t.value||(v(e),await(0,l.nextTick)())},{immediate:!0,deep:!0}),(0,l.watch)(()=>r.usePrivateNetwork,e=>{e||n.value||(r.disablePublicNetwork=!1,r.disablePublicIpv4=!1,r.disablePublicIpv6=!1)}),(0,l.watch)(()=>r.networkIds,e=>{e&&0!==e.length||n.value||(r.disablePublicNetwork=!1)}),(0,l.watch)(r,async()=>{s.value=o();const e=0===s.value.length;i.value=e,a("validationChanged",e),e&&!n.value&&await u()},{immediate:!0,deep:!0}),{serverConfiguration:r,isValid:i,validationErrors:s,syncingFromProps:n,syncingToProps:t,getErrorForField:d,hasError:c}}var g=r(3927),w=r(4364);const y={class:"hetzner-config"},k={class:"mt-20 mb-20"},I={class:"row mt-10"},N={class:"col span-12"},P={key:0,class:"field-error"},z={class:"row mt-10"},E={class:"col span-6"},V={key:0,class:"field-error"},_={class:"col span-6"},C={key:0,class:"field-error"},T={class:"row mt-10"},A={class:"col span-12"},L={class:"mt-30 mb-20"},U={class:"row mt-10 vcenter"},D={class:"col span-6"},S={class:"col span-6"},B={class:"row mt-20"},$={class:"col span-4"},G={class:"col span-4"},F={class:"col span-4"},j={class:"row mt-20"},q={class:"col span-6"},K={class:"col span-6"},x={class:"mt-30 mb-20"},O={class:"row mt-10"},M={class:"col span-12"},H={class:"mb-5"},R={class:"description mb-10"},J={class:"row mt-10"},X={class:"col span-12"},Q=(0,l.defineComponent)({mixins:[g.A]});var W=(0,l.defineComponent)({...Q,__name:"hetzner",props:{uuid:{},cluster:{default:()=>({})},value:{},credentialId:{},provider:{},disabled:{type:Boolean,default:!1},busy:{type:Boolean,default:!1}},emits:["validationChanged"],setup(e,{emit:a}){const r=e,c=a,u=(0,l.ref)({locations:[],serverTypes:[],serverImages:[],sshKeys:[],firewalls:[],networks:[],placementGroups:[]}),v=(0,l.toRef)(r,"value"),{serverConfiguration:m,validationErrors:b,getErrorForField:h,hasError:g}=f(v,c),Q=(0,l.ref)(!0),W=(0,l.ref)(!0),Y=(0,l.ref)(null),Z=(0,l.ref)(null),ee=(0,l.computed)(()=>Q.value||r.busy),ae=(0,l.computed)(()=>{const e=h("network"),a=h("networkIds");return e||a}),re=(0,l.computed)(()=>{const e={value:null,label:"None (auto-generate)"};return[e,...u.value.sshKeys||[]]});return(0,l.watch)(()=>m.serverLocation,async e=>{if(Z.value){Q.value=!0;try{u.value.serverTypes=await Z.value.getServerTypes(e),u.value.serverTypes.some(e=>e.value===m.serverType)||(m.serverType=void 0)}catch(a){w.error("Failed to load server types:",a)}finally{Q.value=!1}}}),(0,l.onMounted)(async()=>{Z.value=new p(r.credentialId);try{const[e,a,r,l,t,n,i]=await Promise.all([Z.value.getLocations(),Z.value.getServerTypes(),Z.value.getImages(),Z.value.getPlacementGroups(),Z.value.getNetworks(),Z.value.getSshKeys(),Z.value.getFirewalls()]);u.value.locations=e,u.value.serverTypes=a,u.value.serverImages=r,u.value.placementGroups=l,u.value.networks=t,u.value.sshKeys=n,u.value.firewalls=i}catch(e){w.error("Failed to load Hetzner data:",e),Y.value=e instanceof Error?e.message:"Failed to load Hetzner Cloud data. Please check your API token."}Q.value=!1,W.value=!1}),(e,a)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",null,[W.value?((0,l.openBlock)(),(0,l.createBlock)(t.A,{key:0,delayed:!0})):(0,l.createCommentVNode)("",!0),Y.value?((0,l.openBlock)(),(0,l.createBlock)(d.A,{key:1,color:"error",label:Y.value},null,8,["label"])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",y,[(0,l.createElementVNode)("h2",k,(0,l.toDisplayString)(e.t("driver.hetzner.machine.server.title")),1),(0,l.createElementVNode)("div",I,[(0,l.createElementVNode)("div",N,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).serverLocation,"onUpdate:value":a[0]||(a[0]=e=>(0,l.unref)(m).serverLocation=e),options:u.value.locations,required:"",disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.server.location.placeholder"),label:e.t("driver.hetzner.machine.server.location.label"),class:(0,l.normalizeClass)({"has-error":(0,l.unref)(g)("serverLocation")})},null,8,["value","options","disabled","loading","placeholder","label","class"]),(0,l.unref)(g)("serverLocation")?((0,l.openBlock)(),(0,l.createElementBlock)("span",P,(0,l.toDisplayString)((0,l.unref)(h)("serverLocation")),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",z,[(0,l.createElementVNode)("div",E,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).serverType,"onUpdate:value":a[1]||(a[1]=e=>(0,l.unref)(m).serverType=e),options:u.value.serverTypes,required:"",disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.server.type.placeholder"),label:e.t("driver.hetzner.machine.server.type.label"),class:(0,l.normalizeClass)({"has-error":(0,l.unref)(g)("serverType")})},null,8,["value","options","disabled","loading","placeholder","label","class"]),(0,l.unref)(g)("serverType")?((0,l.openBlock)(),(0,l.createElementBlock)("span",V,(0,l.toDisplayString)((0,l.unref)(h)("serverType")),1)):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("div",_,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).serverImage,"onUpdate:value":a[2]||(a[2]=e=>(0,l.unref)(m).serverImage=e),options:u.value.serverImages,required:"",disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.server.image.placeholder"),label:e.t("driver.hetzner.machine.server.image.label"),class:(0,l.normalizeClass)({"has-error":(0,l.unref)(g)("serverImage")})},null,8,["value","options","disabled","loading","placeholder","label","class"]),(0,l.unref)(g)("serverImage")?((0,l.openBlock)(),(0,l.createElementBlock)("span",C,(0,l.toDisplayString)((0,l.unref)(h)("serverImage")),1)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("div",T,[(0,l.createElementVNode)("div",A,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).placementGroupId,"onUpdate:value":a[3]||(a[3]=e=>(0,l.unref)(m).placementGroupId=e),options:u.value.placementGroups,clearable:"",disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.server.placementGroup.placeholder"),label:e.t("driver.hetzner.machine.server.placementGroup.label")},null,8,["value","options","disabled","loading","placeholder","label"])])]),(0,l.createElementVNode)("h2",L,(0,l.toDisplayString)(e.t("driver.hetzner.machine.network.title")),1),ae.value?((0,l.openBlock)(),(0,l.createBlock)(d.A,{key:0,color:"warning",label:ae.value},null,8,["label"])):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("div",U,[(0,l.createElementVNode)("div",D,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).networkIds,"onUpdate:value":a[4]||(a[4]=e=>(0,l.unref)(m).networkIds=e),options:u.value.networks,multiple:"",disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.network.networks.placeholder"),label:e.t("driver.hetzner.machine.network.networks.label"),class:(0,l.normalizeClass)({"has-error":(0,l.unref)(g)("networkIds")})},null,8,["value","options","disabled","loading","placeholder","label","class"])]),(0,l.createElementVNode)("div",S,[(0,l.createVNode)(s.A,{value:(0,l.unref)(m).usePrivateNetwork,"onUpdate:value":a[5]||(a[5]=e=>(0,l.unref)(m).usePrivateNetwork=e),disabled:ee.value,label:e.t("driver.hetzner.machine.network.private.label"),description:e.t("driver.hetzner.machine.network.private.description")},null,8,["value","disabled","label","description"])])]),(0,l.createElementVNode)("div",B,[(0,l.createElementVNode)("div",$,[(0,l.createVNode)(s.A,{value:(0,l.unref)(m).disablePublicNetwork,"onUpdate:value":a[6]||(a[6]=e=>(0,l.unref)(m).disablePublicNetwork=e),disabled:ee.value||!(0,l.unref)(m).networkIds?.length,label:e.t("driver.hetzner.machine.network.disablePublic.label"),description:e.t("driver.hetzner.machine.network.disablePublic.description")},null,8,["value","disabled","label","description"])]),(0,l.createElementVNode)("div",G,[(0,l.createVNode)(s.A,{value:(0,l.unref)(m).disablePublicIpv4,"onUpdate:value":a[7]||(a[7]=e=>(0,l.unref)(m).disablePublicIpv4=e),disabled:ee.value||(0,l.unref)(m).disablePublicNetwork,label:e.t("driver.hetzner.machine.network.disableIPv4.label"),description:e.t("driver.hetzner.machine.network.disableIPv4.description")},null,8,["value","disabled","label","description"])]),(0,l.createElementVNode)("div",F,[(0,l.createVNode)(s.A,{value:(0,l.unref)(m).disablePublicIpv6,"onUpdate:value":a[8]||(a[8]=e=>(0,l.unref)(m).disablePublicIpv6=e),disabled:ee.value||(0,l.unref)(m).disablePublicNetwork,label:e.t("driver.hetzner.machine.network.disableIPv6.label"),description:e.t("driver.hetzner.machine.network.disableIPv6.description")},null,8,["value","disabled","label","description"])])]),(0,l.createElementVNode)("div",j,[(0,l.createElementVNode)("div",q,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).firewallIds,"onUpdate:value":a[9]||(a[9]=e=>(0,l.unref)(m).firewallIds=e),options:u.value.firewalls,multiple:"",disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.network.firewalls.placeholder"),label:e.t("driver.hetzner.machine.network.firewalls.label")},null,8,["value","options","disabled","loading","placeholder","label"])]),(0,l.createElementVNode)("div",K,[(0,l.createVNode)(n.A,{value:(0,l.unref)(m).sshKeyId,"onUpdate:value":a[10]||(a[10]=e=>(0,l.unref)(m).sshKeyId=e),options:re.value,disabled:ee.value,loading:ee.value,placeholder:e.t("driver.hetzner.machine.network.sshKey.placeholder"),label:e.t("driver.hetzner.machine.network.sshKey.label")},null,8,["value","options","disabled","loading","placeholder","label"])])]),(0,l.createElementVNode)("h2",x,(0,l.toDisplayString)(e.t("driver.hetzner.machine.additionalConfig.title")),1),(0,l.createElementVNode)("div",O,[(0,l.createElementVNode)("div",M,[(0,l.createElementVNode)("h3",H,(0,l.toDisplayString)(e.t("driver.hetzner.machine.additionalConfig.userData.label")),1),(0,l.createElementVNode)("div",R,(0,l.toDisplayString)(e.t("driver.hetzner.machine.additionalConfig.userData.description")),1),(0,l.createVNode)(o.A,{value:(0,l.unref)(m).additionalUserData,"onUpdate:value":a[11]||(a[11]=e=>(0,l.unref)(m).additionalUserData=e),disabled:ee.value,placeholder:e.t("driver.hetzner.machine.additionalConfig.userData.placeholder"),label:e.t("driver.hetzner.machine.additionalConfig.userData.label"),showCodeEditor:!0,scrolling:!0},null,8,["value","disabled","placeholder","label"])])]),(0,l.createElementVNode)("div",J,[(0,l.createElementVNode)("div",X,[(0,l.createVNode)(i.A,{value:(0,l.unref)(m).serverLabels,"onUpdate:value":a[12]||(a[12]=e=>(0,l.unref)(m).serverLabels=e),valueCanBeEmpty:!0,disabled:ee.value,loading:ee.value,title:e.t("driver.hetzner.machine.additionalConfig.labels.label"),"three-columns":!1,titleProtip:e.t("driver.hetzner.machine.additionalConfig.labels.description")},null,8,["value","disabled","loading","title","titleProtip"])])])])]))}}),Y=(r(8698),r(7433));const Z=(0,Y.A)(W,[["__scopeId","data-v-495f986c"]]);var ee=Z}}]);
//# sourceMappingURL=hetzner-node-driver-0.1.3.umd.min.machine-config.js.map